<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Components Now!</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1274, user-scalable=no">
	<link rel="stylesheet" href="styles/screen.css">
	<link rel="stylesheet" href="styles/print.css" media="print">

    <link rel="stylesheet" href="styles/idea.min.css">
</head>
<body class="list">
	<header class="caption">
		<h1>Components Now!</h1>
		<a href="http://twitter.com/azproduction">Mikhail Davydov</a>
	</header>

	<section class="slide null">
		<img src="images/yandex.svg" class="yandex"/>
	</section>

    <section class="slide">
        <h2>About me</h2>
        <ul>
            <li>Front-End Engineer at Yandex</li>
            <li>Developer of <a href="https://taxi.yandex.ru/">Yandex.Taxi</a> and <a href="http://mobile.yandex.ru/">Yandex.Mobile</a></li>
            <li>JavaScript Teacher</li>
            <li>Author of articles about Web technologies</li>
        </ul>
    </section>

    <section class="slide cover w h c">
        <div><img src="pictures/yandex-services.jpg" alt="Yandex Services"/></div>
    </section>

    <section class="slide first"><div class="arrow">
    	<img src="images/yandex.svg" class="yandex"/>
		<h2>Components Now!</h2>
        <div class="info">
            <p class="author">Mikhail Davydov</p>
            <p class="location">MetaRefresh, 15 Feb 2014</p>
        </div>
    </div></section>

    <section class="slide cover h c">
        <h2>Code libraries</h2>
        <div><img src="pictures/books.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Code libraries</h2>
        <ul>
            <li>jQuery &mdash; fixes DOM</li>
            <li class="next">Underscore &mdash; fills ECMAScript 3-5 gap</li>
            <li class="next">Backbone &mdash; brings MV*</li>
            <li class="next">They are created to fix Web</li>
        </ul>
        <p>For some historical reasons many good tools are libraries.<br/>
            <a href="http://ejohn.org/blog/the-dom-is-a-mess/">The DOM is a Mess</a> 2009
        </p>
    </section>

    <section class="slide cover h c">
        <h2>Libraries are everywhere</h2>
        <div><img src="pictures/library.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Libraries are big</h2>
        <ul>
            <li>Heavy
                <ul>
                    <li>jQuery 2.0.3 &mdash; 230K (unpacked)</li>
                </ul>
            </li>
            <li class="next">Hard to understand
                <ul>
                    <li>Cyclomatic complexity of $.ajax &mdash; <a href="http://es-analysis.github.io/plato/examples/jquery/files/src_ajax_js/index.html">43</a></li>
                </ul>
            </li>
            <li class="next">Too powerful
                <ul>
                    <li>$.ajax, $.animate, _</li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide">
        <h2>Libraries are tightly coupled</h2>
        <ul>
            <li>Hard to get a small part
                <ul>
                    <li>$.Deferred, $.ajax</li>
                    <li>_.template</li>
                </ul>
            </li>
            <li>Manual extraction</li>
            <li>Their modules don't help much</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Dependencies management</h2>
        <ul>
            <li>Dependency on jQuery</li>
            <li class="next">Libraries require libraries
                <ul>
                    <li>Backbone+jQuery+Underscore</li>
                </ul>
            </li>
            <li class="next">Manual dependencies management
                <ul>
                    <li>Bower and Npm are lifesavers</li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide cover w c">
        <h2>Web is fixed*</h2>
        <div><img src="pictures/filled-gap.jpg"/></div>
    </section>

    <section class="slide cover h w c">
        <div><a href="http://acid3.acidtests.org/"><img src="pictures/acid3.jpg" alt="ACID3 test result"/></a></div>
    </section>

    <section class="slide">
        <h2>Critical DOM APIs</h2>
        <ul>
            <li>querySelector</li>
            <li>CSS3 Selectors*</li>
            <li>Web Storage (localStorage)</li>
            <li>Cross-Origin Resource Sharing*</li>
        </ul>
        <p>* fully with polyfills<br/>
            <a href="http://caniuse.com/">Can I Use</a>
        </p>
    </section>

    <section class="slide cover h w c">
        <h2>ECMAScript 5</h2>
        <div><a href="http://kangax.github.io/es5-compat-table/"><img src="pictures/es5-compat.png" alt="ECMAScript 5 compatibility table"/></a></div>
    </section>

    <section class="slide">
        <h2>Polyfills can fix the rest</h2>
        <ul>
            <li><a href="http://selectivizr.com/">CSS3 Selectors</a> (slow, not recommended)</li>
            <li><a href="https://github.com/flensed/flXHR">Cross-Origin Resource Sharing</a></li>
            <li><a href="https://code.google.com/p/html5shiv/">HTML5 Elements</a></li>
            <li><a href="https://github.com/es-shims/es5-shim/">ECMAScript 5</a></li>
        </ul>
        <p><a href="http://html5please.com/#polyfill">HTML5 Please polyfills</a></p>
    </section>

    <section class="slide cover w c">
        <h2>Mobile</h2>
        <div><img src="pictures/mobile-score.jpg"/></div>
    </section>

    <section class="slide cover w c">
        <h2>Mobile Growth</h2>
        <div><img src="pictures/mobile-growth.jpg"/></div>
    </section>

    <section class="slide shout">
        <h2>Why do we use libraries?</h2>
    </section>

    <section class="slide cover h w c" style="background: #fff">
        <h2>Components</h2>
        <div><img src="pictures/block.jpg"/></div>
    </section>

    <section class="slide cover h w c" style="background: #fff">
        <h2>Simple</h2>
        <div><img src="pictures/board.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Components are simple</h2>
        <ul>
            <li>Lightweight
                <ul>
                    <li><a href="https://github.com/component/dom">dom</a> &mdash; 28K, 3K self (unpacked)</li>
                </ul>
            </li>
            <li class="next">Single responsibility & KISS Principle</li>
            <li class="next">Easy to understand
                <ul>
                    <li>Maintain</li>
                    <li>Write tests</li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide cover h w c" style="background: #fff">
        <h2>Standalone</h2>
        <div><img src="pictures/stand-alone.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Components are standalone</h2>
        <ul>
            <li>Contain all dependencies
                <ul>
                    <li>Most of them are external</li>
                </ul>
            </li>
            <li class="next">Easy to reuse
                <ul>
                    <li><code>bower i name</code></li>
                    <li><code>npm i name</code></li>
                </ul>
            </li>
            <li class="next">It is simple to use a part</li>
        </ul>
    </section>

    <section class="slide cover h c">
        <h2>Isolated</h2>
        <div><img src="pictures/isolated.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Components are isolated</h2>
        <ul>
            <li>Do not interfere with others
                <ul>
                    <li>Scoped CSS</li>
                    <li>Flexible layout</li>
                    <li>No globals leak</li>
                </ul>
            </li>
            <li class="next">Has restricted access to others
                <ul>
                    <li><code>require()</code></li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide cover h c" style="background: #fff">
        <div><img src="pictures/web-components.jpg" alt="WebComponents"/></div>
    </section>

    <section class="slide">
        <h2>WebComponents is API</h2>
        <ul>
            <li>Idea of Custom HTML Elements</li>
            <li class="next">API/Framework
                <ul>
                    <li>Shadow DOM (Encapsulation)</li>
                    <li>HTML Imports & Templates</li>
                    <li>Template Binding</li>
                </ul>
            </li>
        </ul>
        <a href="https://funnel.hasgeek.com/metarefresh2013/627-web-components-and-the-future-of-web-development">Web components and the future of web development</a> from MR 2013
    </section>

    <section class="slide">
        <h2>WebComponents in 2014</h2>
        <ul class="support">
            <li class="support_by_chrome-ffn">HTML Templates</li>
            <li class="support_by_chrome">Shadow DOM</li>
            <li class="support_by_chrome-ffn">Custom Elements</li>
            <li class="support_by_none">HTML Imports</li>
        </ul>
        <p>It is possible to polyfill others using <a href="http://www.polymer-project.org/">Polymer</a>.</p>
    </section>

    <section class="slide">
        <h2>Alternatives for these APIs</h2>
        <table>
            <tr>
                <th>WeComponents API</th><th>Alternative</th>
            </tr>
            <tr>
                <td>Custom Elements</td><td>Component engines</td>
            </tr>
            <tr>
                <td>Shadow DOM</td><td>BEM Methodology</td>
            </tr>
            <tr>
                <td>HTML Templates</td><td>Template engines</td>
            </tr>
            <tr>
                <td>HTML Imports</td><td>Build tools</td>
            </tr>
            <tr>
                <td>Scoped CSS</td><td>BEM or OOCSS</td>
            </tr>
            <tr>
                <td>Template Binding</td><td>Data binding</td>
            </tr>
        </table>
    </section>

    <section class="slide">
        <h2>Many Component engines</h2>
        <ul>
            <li><a href="http://www.x-tags.org/">X-Tag</a></li>
            <li><a href="http://api.jqueryui.com/jQuery.widget/">jQuery UI</a> Widgets</li>
            <li><a href="http://dojotoolkit.org/reference-guide/1.9/quickstart/writingWidgets.html">Dojo</a> Widgets</li>
            <li><a href="http://facebook.github.io/react/">React</a></li>
            <li><a href="http://bem.info/">BEM Tools</a></li>
        </ul>
    </section>

    <section class="slide cover h c" style="background: #fff">
        <div><img src="pictures/bem.jpg"/></div>
    </section>

    <section class="slide">
        <h2>BEM briefly</h2>
        <ul>
            <li>Avoid CSS cascade</li>
            <li>Block &mdash; Custom Element</li>
            <li>Element &mdash; Shadow DOM</li>
            <li>Modifier &mdash; Component State</li>
        </ul>
        <a href="https://funnel.hasgeek.com/metarefresh2013/606-maintainable-frontend-development-with-bem">Maintainable frontend development with BEM</a> from MR 2013
    </section>

    <section class="slide cover h c" style="background: #fff">
        <div><img src="pictures/block-elements.jpg"/></div>
        <ul style="position: absolute; left: 36%; top: 65%" class="no-bullets">
            <li class="next"><code>.tab-panel</code> &mdash; Block</li>
            <li class="next"><code>.tab-panel__tab</code> &mdash; Element</li>
            <li class="next"><code>.tab-panel__tab_state_active</code></li>
        </ul>
    </section>

    <section class="slide shout">
        <h2>Let's build the Component!</h2>
    </section>

    <section class="slide cover h c" style="background: #fff">
        <div><img src="pictures/my-share.jpg" alt="my-share Component"/></div>
    </section>

    <section class="slide">
        <h2>Keep in mind that</h2>
        <ul>
            <li>Component is <strong>Simple</strong>
                <ul>
                    <li>KISS</li>
                </ul>
            </li>
            <li>Component is <strong>Standalone</strong>
                <ul>
                    <li>Dependencies</li>
                </ul>
            </li>
            <li>Component is <strong>Isolated</strong>
                <ul>
                    <li>Layout, CSS, JS</li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide cover w c" style="background: #fff">
        <h2>Package file</h2>
        <div><img src="pictures/contract.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Package file is the contract</h2>
        <pre class="javascript">
            <code>// bower.json</code>
            <code>{</code>
            <code>    "name": "my-share",</code>
            <code>    "version": "1.0.0",</code>
            <code>    "main": ["my-share.js"]</code>
            <code>}</code>
        </pre>
        <p><a href="http://bower.io/">Bower</a> and format of <a href="http://bower.io/#defining-a-package">bower.json</a></p>
    </section>

    <section class="slide cover w c" style="background: #fff">
        <h2>HTML Layout</h2>
        <div><img src="pictures/plan.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Private HTML Layout</h2>
        <pre class="html">
            <code>&lt;!-- my-share.html --&gt;</code>
            <code>&lt;a href="<mark>{{ href }}</mark>" class="my-share"&gt;</code>
            <code>    &lt;img src="<mark>{{ icon }}</mark>" class="my-share__icon"/&gt;</code>
            <code>    &lt;span class="my-share__label"&gt;<mark>{{ label }}</mark>&lt;/span&gt;</code>
            <code>&lt;/a&gt;</code>
        </pre>
        <p>This template is written using <a href="http://bem.info/">BEM</a> Methodology.</p>
    </section>

    <section class="slide cover w c" style="background: #fff">
        <h2>Interface</h2>
        <div><img src="pictures/door.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Interface</h2>
        <pre class="html">
            <code>&lt;a class="my-share"</code>
            <code>   data-href="<mark>{{ href }}</mark>"</code>
            <code>   data-icon="<mark>{{ icon }}</mark>"</code>
            <code>&gt;<mark>{{ label }}</mark>&lt;/a&gt;</code>
        </pre>
        <p>This interface is similar to the WebComponents.</p>
    </section>

    <section class="slide">
        <h2>WebComponents for comparison</h2>
        <pre class="html">
            <code>&lt;my-share</code>
            <code>   href="<mark>{{ href }}</mark>"</code>
            <code>   icon="<mark>{{ icon }}</mark>"</code>
            <code>&gt;<mark>{{ label }}</mark>&lt;/my-share&gt;</code>
        </pre>
    </section>

    <section class="slide">
        <h2>CSS for my-share Component</h2>
        <pre class="html">
            <code>.<mark>my-share</mark> {}</code>
            <code>.my-share__<mark>icon</mark> {</code>
            <code>    vertical-align: middle;</code>
            <code>    height: 16px;</code>
            <code>}</code>
            <code>.my-share__<mark>label</mark> {</code>
            <code>    padding-left: 5px;</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>CSS for my-share WebComponent</h2>
        <pre class="html">
            <code><mark>my-share</mark> {}</code>
            <code>.<mark>icon</mark> {</code>
            <code>    vertical-align: middle;</code>
            <code>    height: 16px;</code>
            <code>}</code>
            <code>.<mark>label</mark> {</code>
            <code>    padding-left: 5px;</code>
            <code>}</code>
        </pre>
    </section>

    <section class="slide">
        <h2>CSS is isolated</h2>
        <ul>
            <li>WebComponent &mdash; DOM API
                <ul>
                    <li><code>&lt;style scoped&gt;</code></li>
                </ul>
            </li>
            <li class="next">BEM
                <ul>
                    <li>Avoid CSS cascade</li>
                    <li>Naming conventions <code>.block__element</code></li>
                </ul>
            </li>
        </ul>
    </section>

    <section class="slide cover w c" style="background: #fff">
        <h2>Dependencies</h2>
        <div><img src="pictures/deps.jpg"/></div>
    </section>

    <section class="slide">
        <h2>External dependencies</h2>
        <pre class="javascript">
            <code>// bower.json</code>
            <code>"dependencies": {</code>
            <code>    "tpl": "azproduction/lodash-template",</code>
            <code>    "domify": "component/domify",</code>
            <code>    "decl": "azproduction/decl"</code>
            <code>}</code>
        </pre>
        <p>Declare all external dependencies.</p>
    </section>

    <section class="slide">
        <h2>Component relations</h2>
        <pre class="javascript">
            <code>// my-share.js</code>
            <code>var tpl = require('tpl'),</code>
            <code>    decl = require('decl'),</code>
            <code>    domify = require('domify');</code>
            <code> </code>
            <code>var html = require('templates/my-share'),</code>
            <code>    template = tpl(html);</code>
        </pre>
    </section>

    <section class="slide">
        <h2>Component logic</h2>
        <pre class="javascript">
            <code>function MyShare(el) {</code>
            <code>    this.options = this.collectOptions(el);</code>
            <code>    this.el = this.render();</code>
            <code>    this.delegateEvents();</code>
            <code>    this.replaceElement(el);</code>
            <code>}</code>
            <code>decl.register('.my-share', MyShare);</code>
            <code>module.exports = MyShare;</code>
        </pre>
    </section>

    <section class="slide">
        <h2>JavaScript is isolated</h2>
        <ul>
            <li><a href="http://wiki.commonjs.org/wiki/Modules/1.0">CommonJS/Modules</a>
                <ul>
                    <li>No globals leak</li>
                    <li>It asks for requirements</li>
                    <li>It provides resources</li>
                </ul>
            </li>
            <li><a href="http://requirejs.org/docs/whyamd.html">AMD</a> can be used too</li>
        </ul>
    </section>

    <section class="slide cover h w c">
        <h2>Assemble</h2>
        <div><img src="pictures/build-site.jpg"/></div>
    </section>

    <section class="slide">
        <h2>Assemble component</h2>
        <ul>
            <li>Resolve all requirements</li>
            <li class="next">Compile
                <ul>
                    <li>styles, scripts, templates</li>
                </ul>
            </li>
            <li class="next">Assemble scripts and templates</li>
            <li class="next">Concatenate styles</li>
        </ul>
    </section>

    <section class="slide">
        <h2>Component build tools</h2>
        <ul>
            <li><a href="http://bem.info/tools/bem/bem-tools/">BEM Tools</a></li>
            <li><a href="https://github.com/component/component">Component</a></li>
            <li><a href="http://browserify.org/">Browserify</a></li>
            <li><a href="http://lmdjs.org/">LMD</a></li>
        </ul>
    </section>

    <section class="slide">
        <h2>Using my-share Component</h2>
        <pre class="html">
            <code>&lt;a class="my-share" ...&gt;<mark>Tweet</mark>&lt;/a&gt;</code>
            <code>&lt;link rel="stylesheet" href="<mark>my-share.css</mark>"/&gt;</code>
            <code>&lt;script src="<mark>my-share.js</mark>"&gt;&lt;/script&gt;</code>
        </pre>
        <p>Compare with WebComponents.</p>
    </section>

    <section class="slide">
        <h2>Using my-share WebComponent</h2>
        <pre class="html">
            <code>&lt;my-share ...&gt;<mark>Tweet</mark>&lt;/my-share&gt;</code>
            <code>&lt;link rel="import" href="<mark>my-share.html</mark>"/&gt;</code>
        </pre>
    </section>

    <section class="slide">
        <h2 style="position: absolute">Live example</h2>
        <iframe src="example/my-share/index.html" frameborder="0" style="width: 100%; height: 100%"></iframe>
    </section>

    <section class="slide cover w h c">
        <h2>Before</h2>
        <div><img src="pictures/before-1.png"/></div>
        <div class="next"><img src="pictures/before-2.png"/></div>
        <div class="next"><img src="pictures/before-3.png"/></div>
        <div class="next"><img src="pictures/before-4.png"/></div>
    </section>

    <section class="slide cover w h c">
        <h2>After</h2>
        <div><img src="pictures/after-1.png"/></div>
        <div class="next"><img src="pictures/after-2.png"/></div>
        <div class="next"><img src="pictures/after-3.png"/></div>
        <div class="next"><img src="pictures/after-4.png"/></div>
    </section>

    <section class="slide">
        <h2>Conclusion</h2>
        <ul>
            <li>Web is Fixed, Mobile is Growing</li>
            <li class="next">Libraries are big and clumsy</li>
            <li class="next">Write and use Components</li>
            <li class="next">WebComponents == API</li>
        </ul>
    </section>

    <div class="slide last">
        <img src="images/yandex.svg" class="yandex"/>
        <h2>Components Now!</h2>
        <div class="info">
            <p class="author">Mikhail Davydov</p>
            <p class="author social">
                <a href="http://habrahabr.ru/users/azproduction"><img src="images/js.svg" alt=""/></a><a href="http://github.com/azproduction"><img src="images/github.svg" alt=""/></a><a href="http://twitter.com/azproduction"><img src="images/twitter.svg" alt=""/></a><a href="http://twitter.com/azproduction">@azproduction</a>
            </p>
        </div>
    </div>

    <section class="slide">
        <h2>Useful resources</h2>
        <ul>
            <li><a href="http://bit.ly/1dUEgZB">Code of my-share</a></li>
            <li><a href="http://youmightnotneedjquery.com/">You might not need jQuery</a></li>
            <li><a href="http://bem.info/">BEM Methodology</a></li>
            <li><a href="http://www.webcomponentsshift.com/">Web Components</a></li>
            <li><a href="http://www.polymer-project.org/">Polymer Project</a></li>
        </ul>
    </section>

    <section class="slide cover c qr-code">
        <a href="http://clck.ru/94Tqf">clck.ru/94Tqf</a>
        <img src="pictures/qr.gif" alt="">
    </section>

	<div class="progress"><div></div></div>

    <script src="js/jquery.min.js"></script>
    <script src="js/highlight.min.js"></script>
    <script src="js/shower/shower.min.js"></script>
    <script src="js/index.js"></script>
</body>
</html>
